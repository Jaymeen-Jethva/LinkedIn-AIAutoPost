<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LinkedIn Post Automation</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
    rel="stylesheet"
  />
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
  <link rel="stylesheet" href="/static/styles.css" />
</head>
<body>
  <!-- Circuit Pattern Background -->
  <div class="circuit-pattern">
    <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <pattern id="circuit" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse">
          <path d="M 10 0 L 10 10 M 0 10 L 20 10" stroke="currentColor" stroke-width="0.5" opacity="0.3" />
          <circle cx="10" cy="10" r="1" fill="currentColor" opacity="0.2" />
          <circle cx="0" cy="0" r="0.5" fill="currentColor" opacity="0.2" />
          <circle cx="20" cy="20" r="0.5" fill="currentColor" opacity="0.2" />
        </pattern>
      </defs>
      <rect width="100%" height="100%" fill="url(#circuit)" />
    </svg>
  </div>

  <div class="container-fluid">
    <header class="app-header">
      <h1 class="app-title hero-title font-display">LinkedIn Post Automation</h1>
      <p class="app-subtitle">Generate AI-powered LinkedIn posts with images</p>
      <div class="hero-pills">
        <span class="hero-pill">ü§ñ AI</span>
        <span class="hero-pill">üñºÔ∏è Images</span>
        <span class="hero-pill">üìÖ Scheduling</span>
      </div>
      <!-- Move theme toggle into header -->
      <div class="header-controls">
        <button class="theme-toggle" aria-label="Toggle theme"></button>
      </div>
    </header>

    <main class="main-grid">
      <!-- Left Panel: Controls -->
      <section class="controls-panel">
        <div class="glass-card glass-card-hover">
          <div style="padding: 2rem; display: flex; flex-direction: column; height: 100%;">
            <form id="postForm" style="flex: 1;">
              <div class="mb-4">
                <label for="topic" class="form-label font-mono" style="font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.5px;">
                  What would you like to post about?
                </label>
                <textarea
                  class="form-control"
                  id="topic"
                  name="topic"
                  rows="4"
                  placeholder="e.g., 'Latest developments in AI and machine learning' or 'I just completed my certification in data science'"
                  required
                ></textarea>
                <div class="char-counter">
                  <span id="charCount">0</span> characters
                  <div class="progress-ring">
                    <svg width="32" height="32">
                      <circle cx="16" cy="16" r="14" stroke="var(--border-color)" stroke-width="3" fill="none" />
                      <circle
                        cx="16"
                        cy="16"
                        r="14"
                        stroke="var(--primary-color)"
                        stroke-width="3"
                        fill="none"
                        stroke-linecap="round"
                        class="progress"
                        id="progressCircle"
                      />
                    </svg>
                  </div>
                </div>
              </div>

              <div class="mb-4">
                <label class="form-label font-mono" style="font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.5px;">
                  Post Style
                </label>
                <div class="segmented-control" id="postTypeControl">
                  <button type="button" class="active" data-value="ai_news">
                    <span>‚ö°</span> AI News
                  </button>
                  <button type="button" data-value="personal_milestone">
                    <span>üß†</span> Personal Milestone
                  </button>
                </div>
                <input type="hidden" id="post_type" name="post_type" value="ai_news" />
              </div>

              <div class="mb-4">
                <div class="image-toggle-container">
                  <label class="form-label font-mono" style="font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 1rem; display: block;">
                    Include AI Image
                  </label>
                  <div class="image-toggle-wrapper">
                    <input type="checkbox" id="includeImageToggle" name="include_image" class="image-toggle-checkbox" checked />
                    <label for="includeImageToggle" class="image-toggle-label">
                      <span class="toggle-track"></span>
                    </label>
                  </div>
                  <div class="toggle-description font-mono" style="font-size: 0.75rem; color: var(--text-muted); margin-top: 0.5rem;">
                    <span class="toggle-desc-on">Generate AI images for richer posts</span>
                    <span class="toggle-desc-off" style="display: none;">Text-only posts for faster generation</span>
                  </div>
                </div>
              </div>

              <div class="mb-4">
                <label for="preferences" class="form-label font-mono" style="font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.5px;">
                  Additional Preferences
                </label>
                <textarea
                  class="form-control"
                  id="preferences"
                  name="preferences"
                  rows="2"
                  placeholder="e.g., 'Keep it professional but friendly' or 'Include technical details'"
                ></textarea>
              </div>
            </form>

            <div id="loading" class="loading-container">
              <div class="loading-steps">
                <div class="loading-step active" data-step="1">
                  <div class="step-icon">üîç</div>
                  <div class="step-text">Searching the web...</div>
                </div>
                <div class="loading-step" data-step="2">
                  <div class="step-icon">ü§ñ</div>
                  <div class="step-text">Generating content with AI...</div>
                </div>
                <div class="loading-step" data-step="3">
                  <div class="step-icon">üé®</div>
                  <div class="step-text">Creating image...</div>
                </div>
                <div class="loading-step" data-step="4">
                  <div class="step-icon">‚ú®</div>
                  <div class="step-text">Finalizing your post...</div>
                </div>
              </div>
              <div class="spinner"></div>
              <p class="loading-text" id="loadingMainText">Generating your post with AI magic...</p>
              <p class="loading-subtext" id="loadingSubtext">This usually takes 10-30 seconds</p>
              <div class="loading-progress-bar">
                <div class="loading-progress-fill" id="loadingProgressFill"></div>
              </div>
            </div>

            <div id="error" class="alert alert-danger" style="display: none;"></div>

            <!-- Sticky / bottom action area -->
            <div class="actions-area">
              <button type="submit" form="postForm" class="btn btn-primary btn-lg w-100" id="generateButton">
                Generate Post
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- Right Panel: Live Preview -->
      <section class="preview-panel">
        <div class="preview-card glass-card-hover">
          <div class="preview-header">
            <h3 style="margin: 0; font-weight: 600;">Live Preview</h3>
            <div class="preview-status-indicators">
              <div class="font-mono" style="font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px;">
                Preview Mode
              </div>
              <div class="search-status-indicator" id="searchStatus" style="display: none;">
                <span class="search-status-dot"></span>
                <span class="search-status-text font-mono" style="font-size: 0.7rem;">Web Search Active</span>
              </div>
            </div>
          </div>
          <div class="preview-content" id="previewContent">
            <div class="preview-placeholder">
              <div style="font-size: 2rem; margin-bottom: 1rem;">‚ú®</div>
              <p>Your generated LinkedIn post will appear here</p>
              <p style="font-size: 0.875rem; opacity: 0.7;">Fill out the form and watch it update in real-time</p>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Preview Modal -->
  <div class="modal fade" id="previewModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Review Your LinkedIn Post</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div id="postPreview"></div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-warning" id="reviseBtn">Request Revision</button>
          <button type="button" class="btn btn-success" id="approveBtn">Approve & Post</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Revision Modal -->
  <div class="modal fade" id="revisionModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Request Revision</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <textarea
            class="form-control"
            id="feedbackText"
            rows="4"
            placeholder="What would you like to change? Be specific about your feedback..."
          ></textarea>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" id="submitRevision">Submit Revision Request</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/static/app.js"></script>
</body>
</html>
